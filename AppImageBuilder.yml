version: 1

script:
  # Clean up and prepare AppDir
  - rm -rf AppDir || true
  - mkdir -p AppDir/usr/bin
  - cp -r build/linux/x64/release/bundle/* AppDir/usr/bin/

AppDir:
  path: ./AppDir

  app_info:
    id: id.glicole.nadekodon
    name: Nadekodon
    icon: usr/bin/data/flutter_assets/assets/icons/nadekodon.png
    version: latest
    exec: usr/bin/nadekodon
    exec_args: $@

  # Set up environment variables for Flutter shared libs
  runtime:
    env:
      LD_LIBRARY_PATH: "$APPDIR/usr/bin/lib:$LD_LIBRARY_PATH"
      PATH: "$APPDIR/usr/bin:$PATH"

AppImage:
  arch: x86_64
  update-information: None
  file_name: nadekodon-linux-x64.AppImage
